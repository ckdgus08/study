[μλ°” κ³ κΈ‰ μ¤ν„°λ”” λ©λ΅](https://ckdgus.tistory.com/80)

κ³µλ¶€ μ‹κ°„ : 2021/04/08 21:20 ~ 22:40 / 2021/04/11 11:00 ~ 11:40

7μ£Όμ°¨. gcμ λ™μ‘μ›λ¦¬μ™€ gcκ°€ μ–Έμ  μ‘λ™λλ”μ§€ μ„¤λ…ν•μ„Έμ”.

### garbage collector μ΄λ€?
κ°€λΉ„μ§€ μ»¬λ ‰μ…μ„ ν•λ§λ””λ΅ ν‘ν„ν•λ©΄, μ‚¬μ©ν•μ§€ μ•λ” λ©”λ¨λ¦¬λ¥Ό ν•΄μ ν•΄μ£Όλ” κ²ƒμ΄λ‹¤. C, C++μ™€ κ°™μ€ μ–Έμ–΄λ“¤μ κ²½μ°μ— κ°λ°μκ°€ μ§μ ‘ μ‚¬μ©ν•μ§€ μ•λ” λ©”λ¨λ¦¬κ°€ μ–΄λ–¤ κ²ƒ μΈμ§€ νλ‹¨ν•μ—¬ ν•΄μ ν•λ” κ³Όμ •μ΄ ν•„μ”ν•λ‹¤.
ν•μ§€λ§ μλ°”μ—μ„λ” μλ°”μ—μ„λ” κ°€λΉ„μ§€ μ»¬λ ‰ν„°κ°€ μ‚¬μ©ν•μ§€ μ•λ” λ©”λ¨λ¦¬λ¥Ό νƒμ§€ν•μ—¬ ν•΄μ ν•΄μ¤€λ‹¤.

### garbage collector μ‚¬μ©μ‹ μ–»μ„ μ μλ” μ¥μ , ν•κ³„
μ¥μ 
1. κ°λ°μκ°€ μ§μ ‘ λ©”λ¨λ¦¬ μμ—­ μ „μ²΄λ¥Ό μ»¨νΈλ΅¤ν•μ§€ μ•μ•„λ„ λ¨.
1. μλ»λ λ©”λ¨λ¦¬ μ ‘κ·ΌμΌλ΅ λ°μƒν•λ” Crash ν„μƒ λ°©μ§€ κ°€λ¥.
1. λ©”λ¨λ¦¬ λ„μλ¥Ό λ°©μ§€ ν•  μ μμ.

ν•κ³„
1. λ…μ‹μ μΌλ΅ λ©”λ¨λ¦¬λ¥Ό ν•΄μ ν•λ” κ²ƒ λ³΄λ‹¤ λ©”λ¨λ¦¬ ν•΄μ μ†λ„κ°€ λλ¦¬λ‹¤.
1. μ–΄λ–¤ λ©”λ¨λ¦¬λ¥Ό ν•΄μ ν• μ§€ κ²°μ •ν•λ”λ° **λΉ„μ©**μ΄ λ“¤μ–΄κ°.
1. GCλ°μƒμ‹ gcλ¥Ό μν–‰ν•λ” μ“°λ λ“ μ΄μ™Έλ” λ¨λ‘ λ©μ¶λ‹¤. (Stop the World)
1. stop the worldλ΅ μΈν•΄ μ–΄ν”λ¦¬μΌ€μ΄μ…μ΄ μ μ‹ λ©μ¶ μ μλ‹¤.
1. gcκ°€ μ–Έμ  λ°μƒν•λ”μ§€(νƒ€μ΄λ°), μ–Όλ§λ™μ• μ‘λ™ν• μ§€(μ μ μ‹κ°„) μ„ μμΈ΅ν•κΈ° μ–΄λ µλ‹¤.
1. μ„ ν•κ³„λ΅ μΈν•΄ μ‹¤μ‹κ°„μΌλ΅ λΉ λ¥΄κ² μ •λ³΄λ¥Ό λ°μν•΄μ•Ό ν•λ” μ‹μ¤ν…μ—λ” μ ν•©ν•μ§€ μ•λ‹¤.

### garbage collector μ‘λ™μ›λ¦¬
κ°€λΉ„μ§€ μ»¬λ ‰ν„°κ°€ μ–΄λ–»κ² μ‘λ™λλ”μ§€ μ•κΈ°μ„ν•΄μ„λ” jvm λ©”λ¨λ¦¬μ Stack, Heapμμ—­μ— λ€ν•΄μ„ μ•μ•„μ•Όν•λ‹¤.

Stackκ³Ό Heapμ— λ€ν•΄ μμ„Έν• μ‘λ™μμ„λ¥Ό λ¨λ¥Έλ‹¤λ©΄ λ¨Όμ € jvm λ©”λ¨λ¦¬μ— λ€ν•΄μ„ κ³µλ¶€ν•  ν•„μ”κ°€ μλ‹¤.

1. λ¨Όμ € GCλ” Stackμ— μλ” λ¨λ“  λ³€μλ¥Ό μ¤μΊ”ν•λ©°, μ–΄λ–¤ κ°μ²΄λ¥Ό μ°Έμ΅°ν•κ³  μλ”μ§€ μ°Ύκ³  λ§ν‚Ήν•λ‹¤. (λ§ν‚Ήλ κ°μ²΄λ” Reachable ObjectsλΌκ³  λ¶€λ¦„.)
1. μ΄λ―Έ λ§ν‚Ήλ κ°μ²΄κ°€ μ°Έμ΅°ν•κ³  μλ” κ°μ²΄λ¥Ό μ°Ύμ•„ λ λ§ν‚Ήν•λ‹¤.
1. 1,2λ² κ³Όμ •μ—μ„ λ§ν‚Ήλμ§€ μ•μ€ κ°μ²΄(Unreachable Objects)λ¥Ό Heapμ—μ„ μ κ±°ν•λ‹¤. 

### μμ„Έν• μ‘λ™ μμ„
μ•„λ μμƒμ— μ •λ§ μ μ„¤λ…λμ–΄ μμ–΄ μμ„Έν• μ„¤λ…μ€ λ§ν¬ μ²¨λ¶€λ΅ λ€μ²΄ν•¨.

[[10λ¶„ ν…μ½”ν†΅] π‘λμ JVMμ Garbage Collector](https://youtu.be/vZRmCbl871I?t=247)

![μ΄λ―Έμ§€](https://github.com/ckdgus08/study/blob/master/image/jvm_heap.png?raw=true)

* Minor GC
1. new μ—°μ‚°μλ¥Ό ν†µν•΄ κ°μ²΄κ°€ Eden μμ—­μ— μ €μ¥λ¨.
1. Eden μμ—­μ΄ κ°€λ“μ°¨λ©΄ Minor GCκ°€ λ°μƒ.
1. Eden μμ—­μ— Reachable Objectsλ¥Ό λ¨λ‘ Survivor1 μμ—­μΌλ΅ μ΄λ™.
1. Unreachable Objectsλ§ λ‚¨μ•„μλ” Eden μμ—­ clear.
1. Survivor1 μμ—­μ΄ κ°€λ“μ°°λ• κΉμ§€ 2~4 λ°λ³µ
1. Survivor1 μμ—­μ΄ κ°€λ“μ°¨λ©΄ Survivor1 μμ—­μ Reachable Objectsλ¥Ό λ¨λ‘ Survivor2 μμ—­μΌλ΅ μ΄λ™.
1. Unreachable Objectsλ§ λ‚¨μ•„μλ” Survivor1 μμ—­ clear.
1. Survivor2 μμ—­μ΄ κ°€λ“μ°°λ• κΉμ§€ 2~4 λ°λ³µ (λ‹¨ Reachable Objectsλ¥Ό survivor2 μμ—­μΌλ΅ μ΄λ™μ‹ν‚΄)
1. μ΄ν›„ μ„ μ‘μ—…μ΄ Survivor1κ³Ό Survivor2λ¥Ό λ²κ°μ•„κ°€λ©΄μ„ κ³„μ† μν–‰λκ³  μ‹κ°„μ΄ μ§€λ‚¨μ— λ”°λΌ old μμ—­μΌλ΅ μ΄λ™λλ‹¤.
* Full GC
1. Old μμ—­μ΄ κ°€λ“μ°¨λ©΄ Full GCκ°€ μν–‰λ¨.
1. Old μμ—­μ„ λ¨λ‘ μ¤μΊ”ν•μ—¬ κ°μ²΄ λ§ν‚Ή ν›„ ν•΄μ  κ³Όμ •μ„ κ±°μΉ¨

μ°Έκ³  μ‚¬μ΄νΈ :
* [[10λ¶„ ν…μ½”ν†΅] π‘λμ JVMμ Garbage Collector](https://www.youtube.com/watch?v=vZRmCbl871I)
* [[10λ¶„ ν…μ½”ν†΅] π¥μ—λ¦¬μ GC](https://www.youtube.com/watch?v=Fe3TVCEJhzo)
* [Java - Garbage Collection(GC,κ°€λΉ„μ§€ μ»¬λ ‰μ…) λ€?](https://coding-start.tistory.com/206)