# 3장

- 다형성 : 지연바인딩이라는 메커니즘을 통해 구현된다
    - 지연 바인딩이란? 바인딩이 실행 시까지 연기되고 실행 시간에 실제 호출되는 함수를 결정하는 것

  → 인터페이스로 선언하고.. 캐스팅해서 사용하는것인듯

- 객체지향의 본질은 공동체를 창조하는것! 너무 이른시기에 구현에 초점을 맞추는것은 어렵고 유연하지는 못한 코드를 만듬

  → 최대한 추상화를 하고 구현체 제작에 들어가라는듯


- 객체의 역할
    - 객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 상호작용 -> 협력
    - 협력에 참여하기 위해 수행하는 로직 -> 책임
    - 객체들이 협력 안에서 수행하는 책임들이 모여 객체가 수행하는 것 -> 역할

  → 솔직히 어렵다.. 자신이 쓰는 언어의틀 안에서 잘 녹여보는게 중요할듯


## 협력

- 협력
    - 메시지전송 : 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단
    - 협력이란 어떤 객체가 다른 객체에게 무엇인가를 요청하는것! 두 객체가 상호작용을 통해 더 큰 책임을 수행하는 것이다
    - 메시지를 수신한 객체는 **"메서드"**를 실행해 요청에 응답

  ![이미지.jpeg](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/81484713-bb0c-4ff8-b9a3-3415e83be355/이미지.jpeg)

  → calculateMovieFee(메시지 전달) → Movie객체가 수신 → 응답

    - Screening 객체와 Movie객체가 가지고 있는 책임과 역할이 다르기때문에 상호작용을 통해 더 큰 책임(예매요금계산)을 수행
    - **객체를 자율적으로 만드는 가장 기본적인 방법은 내부구현을 캡슐화 하는것**
        - 메서드 호출만을 통해서 작업이 수행되어야함! 호출하는 객체가 호출당하는 객체의 다른 부분을 건들이면 좋지 않다

- 협력이 설계를 위한 문맥을 결정한다? ⁉️
    - 협력이 존재하기 때문에 객체가 존재 → 따라서 객체의 행동을 결정하는것은 협력
        - 여기서 "협력"이란 메시지 전송 즉 메서드 호출을 뜻한다.. 따라서 객체의 행동을 결정하는것은 메서드의 역할..?? / 메서드를 사용하기 위해 객체를 만드는 것인가?
    - 객체의 상태를 결정하는것은 행동
        - 행동이란 ? 메서드로 협력하는 것인듯.. 메서드호출에따라 객체의 상태(여러가지변수)가 결정되므로 맞는듯함


## 책임

- 필자 왈 : 객체지향 설계에서 가장 중요한 것

- 하는것
    - 객체를 생성하거나 계산을 수행하는등의 스스로 하는 것
    - 다른 객체의 행동을 시작시키는 것 → 메서드로 할 수 있을듯하다
    - 다른 객체의 활동을 제어하고 조절하는 것 → 메서드로 할 수 있을듯하다
- 아는것
    - 사적인 정보에 관해 아는 것 // private
    - 관련된 객체에 관해 아는 것 // inject
    - 자신이 유도하거나 계산할 수 있는것에 관해 아는 것

- 책임과 메시지(개념은 메시지.. 구체화하면 메서드) 의 차이
    - 책임은 객체가 수행할 수 있는 행동을 종합적이고 간략하게 서술하기 때문에 메시지보다 추상적이고 개념적으로도 더 크다
    - 책임 하나가 여러개의 메시지로 분할되기도 한다
    - 하나의 객체가 수행할 수 있다고 생각했던 책임이 나중에는 여러 객체들이 협력해야만 하는 커다란 책임으로 자라는것이 일반적
- 좋은 설계 방법
    - 서비스가 제공하는 기능을 하나의 책임으로 보고 이 책임을 완료하는데 더 작은 책임을 찾아내고 이 책임들을 객체들에게 할당하는것
    - ex) 영화 예매
        - 기능 : 영화 예매
        - 기능 수행을 위해 찾아낸 작은 책임들 : 예매하기, 가격 계산하기
        - Screening 객체에 예매하기 할당, Movie객체에 가격계산하기 할당
    - **→ 이 과정을 책임 주도 설계라고 한다**

      💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬

        - **메서드는 15줄 이하로.. 뎁스는 2이하로**
        - **사람을 통해 인수인계를 하면 안 좋다**

      💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬


- 행동이 상태를 결정한다
    - 행동이 아니라 상태에 초점을 맞추는 것이 좋다
    - 상태를 먼저 정하고 상태에 필요한 행동을 결정하면 캡슐화를 저해할 수 있다
    - * 캡슐화를 위반하지 않으려면 구현에 대한 결정을 뒤로 미루면서 객체의 행위를 고려하는게 좋다*
    - **객체가 가질 수 있는 상태는 행동을 결정하고 나서야 비로소 결정할 수 있다**
    - ⁉️ 저는 지금 구현 할때 필요한 변수 생각하고 메서드를 구현하는데 반대로 하라는 뜻일까요?

  💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬

    - 입력과 출력 = 상태, 행동 = 메서드구현
    - 굉장히 이상적인 이론만 모아놨기때문에

  💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬 💬


## 역할

- 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합을 역할이라고 부른다
- 실제로 협력을 모델링할 때는 특정한 객체가 아니라 역할에게 책임을 할당한다고 생각하는 것이 좋다

  ![이미지 2.jpeg](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ead1d5b1-fb4f-4c36-bc53-693f48f3853a/이미지_2.jpeg)

  Amount / Percent 각각 책임을 할당하는게 아니라 "할인"이라는 역할에 책임을 할당한다. → 추상화

- 역할을 구현하는 가장 일반적인 방법은 추상 클래스와 인터페이스를 사용하는 것
    - 협력의 관점에서 추상 클래스와 인터페이스는 구체 클래스들이 따라야 하는 책임의 집합을 서술한 것
- 객체에 관해 생각할 때 이 객체가 무슨 역할을 수행해야 하는가? 라고 생각하는게 도움이 된다

  ![이미지 3.jpeg](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e01bc0ed-6753-4333-94e3-e9eb760259a1/이미지_3.jpeg)


결국 역할을 결정한다는 것은 추상클래스/ 인터페이스를 설계하는 것인가?